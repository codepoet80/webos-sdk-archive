<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="gps">
      GPS
    </h1>
    <p>
      The Location service provides basic location services for single or multiple location fixes.
    </p>
    <p>
      <strong>Notes:</strong>
    </p>
    <ul>
      <li>
        <p>
          For the <strong>TouchPad</strong>, Google location services are used to provide WiFi fixes. This requires users to set Google services to ON. However, this does not apply to a 3G TouchPad, which has a GPS chip and a modem.
        </p>
      </li>
      <li>
        <p>
          Some carriers may not support, or may limit access to, Assisted-GPS (A-GPS) for location services. This can dramatically increase the time necessary for an initial position fix. This can be mitigated to some extent by choosing the parameters <code>responseTime:1</code> and <code>accuracy:3</code> when requesting position information. These settings, when combined with Google Services, will return a low-resolution fix within 30 seconds in most environments. Once the low resolution fix is acquired, updating the location using 'responseTime:3' and 'accuracy:1' will provide a high resolution location fix when available.
        </p>
      </li>
      <li>
        <p>
          <strong>To avoid excessive battery use:</strong>
        </p>
        <ul>
          <li>
            <p>
              Use the <code>maximumAge</code> field whenever appropriate.
            </p>
          </li>
          <li>
            <p>
              Only use the Location service when necessary.
            </p>
          </li>
          <li>
            <p>
              If you do not need fixes every second, limit the number of tracking requests.
            </p>
          </li>
          <li>
            <p>
              Do not do a lot of location requests while your application is minimized, unless absolutely necessary.
            </p>
          </li>
          <li>
            <p>
              Tracking fixes are suspended (not canceled) if the power turns off. When the power is back on, the tracking fixes resume.
            </p>
          </li>
        </ul>
      </li>
      <li>
        <p>
          <strong>If the Location service returns an error code 6 (Permission Denied):</strong>
        </p>
        <ul>
          <li>
            <p>
              Error code 6 (Permission Denied) indicates that the user has not accepted the terms of use for the Google Location service, or the Google Location service is OFF. In this case, the application cannot use the Google Location service, but the GPS Service can still return locations.
            </p>
          </li>
          <li>
            <p>
              The user can accept the terms from the Location service preference panel or in response to a dialog that appears each time an application makes a Location service request.
            </p>
            <p>
              Remind the user with a message similar to this: <em>Permission Denied. To use this service, you must enable the Location service using the Location Services Preferences in the Launcher</em>.
            </p>
          </li>
          <li>
            <p>
              In the Emulator, the user is not required to perform the &quot;First Use&quot; setup. Consequently, the Location service returns error code 6 until it is switched on manually in the Location Prefs application.
            </p>
          </li>
        </ul>
      </li>
    </ul>
    <hr>
    <h2 id="methods">
      Methods
    </h2>
    <ul>
      <li>
        <a href="#getCurrentPosition">getCurrentPosition</a> - Returns a location fix.
      </li>
      <li>
        <a href="#startTracking">startTracking</a> - Returns continuous location fixes.
      </li>
      <li>
        <a href="#getReverseLocation">getReverseLocation</a> - Returns a location fix given a longitude and latitude.
      </li>
    </ul>
    <p>
      Also in this document: <a href="#route">GPS CSV Route File</a>
    </p><a href="getCurrentPosition"></a>
    <hr>
    <h2 id="getcurrentposition">
      getCurrentPosition
    </h2>
    <p>
      Requests a location fix. This method does not return until a valid fix is available or the <code>responseTime</code> is exceeded. If called without any parameters, it returns the medium accuracy result.
    </p>
    <h3 id="syntax">
      Syntax
    </h3>
    <pre>
{
    "accuracy"     : int,
    "maximumAge"   : int,
    "responseTime" : int
}       

</pre>
    <h3 id="parameters">
      Parameters
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            accuracy
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Location fix accuracy/precision:
            <ul>
              <li>1: High (100 mt or less)
              </li>
              <li>2 (default): Medium (350 mt or less)
              </li>
              <li>3: Low
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            maximumAge
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Indicates that the application can accept a cached position whose age is not greater than the specified time in seconds. If set to 0 or not specified, the service immediately attempts to acquire a new position object. Default is 0 - do not use the cached value.
          </td>
        </tr>
        <tr>
          <td>
            responseTime
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            First fix desired time:
            <ul>
              <li>1: Immediate less than 5 sec
              </li>
              <li>2 (default): Greater than 5 sec and less than 20 sec
              </li>
              <li>3: Greater than 20 sec
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="returns">
      Returns
    </h3>
    <pre>
{
   "returnValue"   : boolean,
   "altitude"      : double,
   "heading"       : double,
   "horizAccuracy" : double,
   "latitude"      : double,
   "longitude"     : double,
   "timestamp"     : double,
   "velocity"      : double,
   "vertAccuracy"  : double,
   "errorCode"     : int   
}
</pre>
    <table border="1">
      <thead>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            Always <code>true</code>.
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            Yes
          </td>
          <td>
            int
          </td>
          <td>
            One of the following:
            <ul>
              <li>0: Success
              </li>
              <li>1: Timeout
              </li>
              <li>2: Position_Unavailable
              </li>
              <li>3: Unknown
              </li>
              <li>5: LocationServiceOFF - No Location source available. Both Google and GPS are off.
              </li>
              <li>6: Permission Denied - The user has not accepted the terms of use for the Google Location Service, or the Google Service is off.
              </li>
              <li>7: The application already has a pending message
              </li>
              <li>8: The application has been temporarily blacklisted.
              </li>
            </ul><strong>Note</strong>: If errorCode=0, then the fields that are listed after this are returned.
          </td>
        </tr>
        <tr>
          <td>
            altitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location altitude in meters. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            heading
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Compass azimuth in degrees. Valid range: 0.0, 360.0. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            horizAccuracy
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's horizontal accuracy in meters. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            latitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's latitude in degrees. Valid range: -90.0, 90.0.
          </td>
        </tr>
        <tr>
          <td>
            longitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's longitude in degrees. Valid range: -180.0, 180.0.
          </td>
        </tr>
        <tr>
          <td>
            timestamp
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Time when location was fixed. This is milliseconds since Epoch, aka Unix time.
          </td>
        </tr>
        <tr>
          <td>
            velocity
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Velocity in meters per second. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            vertAccuracy
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's vertical accuracy in meters. If unknown, the value is -1.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="examples">
      Examples
    </h3>
    <p>
      <strong>luna-send</strong>
    </p>
    <pre>

root@webos-device:/var/home/root# luna-send -P -i palm://com.palm.location/getCurrentPosition '{"subscribe":true}'
{"altitude":0,"errorCode":0,"heading":0,"horizAccuracy":20,"latitude":37.390196,"longitude":-122.037845,"returnValue":true,"timestamp":1311197978000,"velocity":0,"vertAccuracy":0}
</pre>
    <p>
      <strong>Enyo</strong>
    </p>
    <pre>
enyo.kind({
   name : "enyo.gps",
   kind : enyo.VFlexBox,
   components : [ 
     { flex : 1,
      kind : "Pane",
      components : [{
         flex : 1,
         kind : "Scroller",
         components : [{
            name      : "getPos",
            kind      : "PalmService",
            service   : "palm://com.palm.location/",
            method    : "getCurrentPosition",
            onSuccess : "getPosSuccess",
            onFailure : "getPosFailure",
            subscribe : true
         },
         {kind : "Button", name : "getPosButton", caption : "Get Current Position", onclick : "getPosClick"}
        ]
      }]
    }],
    getPosClick: function() {       
         this.$.getPos.call({});
    },
    getPosSuccess : function(inSender, inResponse) {
        enyo.log("getCurrentPosition success, results=" + enyo.json.stringify(inResponse));
    },
    getPosFailure : function(inSender, inResponse) {
        enyo.log("getCurrentPosition failure, results=" + enyo.json.stringify(inResponse));
    }
});
</pre>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.location', {
     method: 'getCurrentPosition',
     parameters: {},
     onSuccess : function (e){ Mojo.Log.info("getCurrentPosition success, results="+JSON.stringify(e)); },
     onFailure : function (e){ Mojo.Log.info("getCurrentPosition failure, results="+JSON.stringify(e)); }
}); 
</pre>
    <p>
      <strong>Success</strong>
    </p>
    <pre>
 getCurrentPosition success, results=
{
   "altitude":33,
   "errorCode":0,
   "heading":-1,
   "horizAccuracy":113,
   "latitude":37.790587,
   "longitude":-122.421341,
   "returnValue":true,
   "timestamp":1306194404000,
   "velocity":-1,
   "vertAccuracy":192
}
</pre>
    <p>
      <strong>Failure</strong>
    </p>
    <pre>
getCurrentPosition failure, results=
{
    "errorCode"   : 1,
    "returnValue" : true
}
</pre><a href="startTracking"></a>
    <hr>
    <h2 id="starttracking">
      startTracking
    </h2>
    <p>
      Requests a <em>continuous</em> location fix. Every time the service determines that the device position has changed, it invokes the <code>onSuccess</code> callback with a new location object. In case of error, the service invokes the callback with an <code>errorCode</code> greater than 0.
    </p>
    <h3 id="syntax-1">
      Syntax
    </h3>
    <pre>
{
    "subscribe"     : boolean
}       

</pre>
    <h3 id="parameters-1">
      Parameters
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            subscribe
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            Set to <code>true</code> to get the response back.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="returns-1">
      Returns
    </h3>
    <pre>
{
   "returnValue"   : boolean,
   "altitude"      : double,
   "heading"       : double,
   "horizAccuracy" : double,
   "latitude"      : double,
   "longitude"     : double,
   "timestamp"     : double,
   "velocity"      : double,
   "vertAccuracy"  : double,
   "errorCode"     : int   
}
</pre>
    <table border="1">
      <thead>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            Always <code>true</code>.
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            One of the following:
            <ul>
              <li>0: Success
              </li>
              <li>1: Timeout
              </li>
              <li>2: Position_Unavailable
              </li>
              <li>3: Unknown
              </li>
              <li>4: GPS_Permanent_Error - No GPS fix but can still get the cell and Wifi fixes. A TouchPad without GPS returns this error.
              </li>
              <li>5: LocationServiceOFF - No Location source available. Both Google and GPS are off.
              </li>
              <li>6: Permission Denied - The user has not accepted the terms of use for the Google Location Service, or the Google Service is off.
              </li>
              <li>7: The application already has a pending message
              </li>
              <li>8: The application has been temporarily blacklisted. (The user is not allowing this application to use this service.)
              </li>
            </ul><strong>Note</strong>: If errorCode=0, then the fields that are listed after this are returned.
          </td>
        </tr>
        <tr>
          <td>
            altitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location altitude in meters. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            heading
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Compass azimuth in degrees. Valid range: 0.0, 360.0. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            horizAccuracy
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's horizontal accuracy in meters. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            latitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's latitude in degrees. Valid range: -90.0, 90.0.
          </td>
        </tr>
        <tr>
          <td>
            longitude
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's longitude in degrees. Valid range: -180.0, 180.0.
          </td>
        </tr>
        <tr>
          <td>
            timestamp
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Time when location was fixed. This is milliseconds since Epoch, aka Unix time.
          </td>
        </tr>
        <tr>
          <td>
            velocity
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Velocity in meters per second. If unknown, the value is -1.
          </td>
        </tr>
        <tr>
          <td>
            vertAccuracy
          </td>
          <td>
            No
          </td>
          <td>
            double
          </td>
          <td>
            Location's vertical accuracy in meters. If unknown, the value is -1.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="examples-1">
      Examples
    </h3>
    <p>
      <strong>luna-send</strong>
    </p>
    <pre>
luna-send -P -i palm://com.palm.location/startTracking '{"subscribe":true}'
{"errorCode":4}
{"returnValue":true}
{"altitude":0,"errorCode":0,"heading":0,"horizAccuracy":20,"latitude":37.390196,"longitude":-122.037845,"returnValue":true,"timestamp":1311188810000,"velocity":0,"vertAccuracy":0}
. . .
</pre>
    <p>
      <strong>Enyo</strong>
    </p>
    <pre>
enyo.kind({
   name : "enyo.gps",
   kind : enyo.VFlexBox,
   components : [ 
     { flex : 1,
      kind : "Pane",
      components : [{
         flex : 1,
         kind : "Scroller",
         components : [ {
            name      : "startTrack",
            kind      : "PalmService",
            service   : "palm://com.palm.location/",
            method    : "startTracking",
            onSuccess : "startTrackSuccess",
            onFailure : "startTrackFailure",
            subscribe : true
         },      
         {kind : "Button", name : "startTrackButton", caption : "Start Tracking", onclick : "startTrackClick"}
        ]
      }]
    }],
    startTrackClick: function() {       
         this.$.startTrack.call({"subscribe":true});
    },
    startTrackSuccess : function(inSender, inResponse) {
        enyo.log("startTracking success, results=" + enyo.json.stringify(inResponse));
    },
    startTrackFailure : function(inSender, inResponse) {
        enyo.log("startTracking failure, results=" + enyo.json.stringify(inResponse));
    }   
});
</pre>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.location', {
    method: 'startTracking',
    parameters: {"subscribe":true},
    onSuccess : function (e){ Mojo.Log.info("startTracking success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("startTracking failure, results="+JSON.stringify(e)); }
}); 
</pre>
    <p>
      <strong>Success</strong>
    </p>
    <pre>
startTracking success, results=
{
    "returnValue" : true
}
</pre>
    <pre>
startTracking success, results=
{
   "altitude":60,
   "errorCode":0,
   "heading":0,
   "horizAccuracy":50,
   "latitude":37.791435,
   "longitude":-122.420241,
   "returnValue":true,
   "timestamp":1306201144000,
   "velocity":0,
   "vertAccuracy":128
}
</pre><a href="getReverseLocation"></a>
    <hr>
    <h2 id="getreverselocation">
      getReverseLocation
    </h2>
    <p>
      Requests a location for the given latitude and longitude. This method can only be used when the Google Service is ON and the terms of use have been accepted.
    </p>
    <h3 id="syntax-2">
      Syntax
    </h3>
    <pre>
{
    latitude  : double,
    longitude : double
}
</pre>
    <h3 id="parameters-2">
      Parameters
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            latitude
          </td>
          <td>
            Yes
          </td>
          <td>
            double
          </td>
          <td>
            Location's latitude in degrees. Valid range: -90.0, 90.0.
          </td>
        </tr>
        <tr>
          <td>
            longitude
          </td>
          <td>
            Yes
          </td>
          <td>
            double
          </td>
          <td>
            Location's longitude in degrees. Valid range: -180.0, 180.0.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="returns-2">
      Returns
    </h3>
    <pre>
{
    "address"   : string,
    "street"    : string,
    "substreet" : string,
    "city"      : string,
    "state"     : string,
    "country"   : string,
    "zipcode"   : string,
    "errorCode" : int
}
</pre>
    <table border="1">
      <thead>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            address
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Formatted user-readable address lines.<br>
            For example, if there are three address lines:<br>
            123 Abc Street<br>
            Your Town, ST 12345<br>
            USA<br>
            A semicolon separates each of the lines. There can be 0 formatted lines.<br>
            The return value for this example address is:<br>
            123 Abc Street ; Your Town, ST 12345 ; USA
          </td>
        </tr>
        <tr>
          <td>
            street
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Street
          </td>
        </tr>
        <tr>
          <td>
            substreet
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Substreet
          </td>
        </tr>
        <tr>
          <td>
            state
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            State
          </td>
        </tr>
        <tr>
          <td>
            country
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Two-digit country code, i.e., &quot;RU&quot; (Russia)
          </td>
        </tr>
        <tr>
          <td>
            zipcode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Zipcode
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            One of the following:
            <ul>
              <li>0: Success
              </li>
              <li>6: Permission Denied - The user has not accepted the terms of use for GPS Services.
              </li>
              <li>7: The application already has a pending message
              </li>
              <li>8: The application has been temporarily blacklisted.
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="examples-2">
      Examples
    </h3>
    <p>
      <strong>luna-send</strong>
    </p>
    <pre>
luna-send -P -i palm://com.palm.location/getReverseLocation '{"latitude":80, "longitude":80}'
{"address":"Russia","country":"RU","errorCode":0}
</pre>
    <pre>
luna-send -P -i palm://com.palm.location/getReverseLocation '{"latitude":37.390196,"longitude":-122.037845}'
{"address":"485 Potrero Ave ;Sunnyvale, CA 94085 ;USA","city":"Sunnyvale","country":"US","errorCode":0,"state":"California","street":"Potrero Ave","substreet":"485","zipcode":"94085"}
</pre>
    <p>
      <strong>Enyo</strong>
    </p>
    <pre>
enyo.kind({
   name : "enyo.gps",
   kind : enyo.VFlexBox,
   components : [ 
     { flex : 1,
      kind : "Pane",
      components : [{
         flex : 1,
         kind : "Scroller",
         components : [{
            name      : "getRevLoc",
            kind      : "PalmService",
            service   : "palm://com.palm.location/",
            method    : "getReverseLocation",
            onSuccess : "getRevLocSuccess",
            onFailure : "getRevLocFailure",
            subscribe : true
         },       
         {kind : "Button", name : "getRevLocButton", caption : "Get Reverse Location", onclick : "getRevLocClick"}
        ]
      }]
    }],
    getRevLocClick: function() {        
         this.$.getRevLoc.call({"latitude":37.390196,"longitude":-122.037845});
    },
    getRevLocSuccess : function(inSender, inResponse) {
        enyo.log("getReverseLocation success, results=" + enyo.json.stringify(inResponse));
    },
    getRevLocFailure : function(inSender, inResponse) {
        enyo.log("getReverseLocation failure, results=" + enyo.json.stringify(inResponse));
    }   
});
</pre>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.location', {
    method: 'getReverseLocation',
    parameters: {"latitude":80, "longitude":80},
    onSuccess : function (e){ Mojo.Log.info("getReverseLocation success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("getReverseLocation failure, results="+JSON.stringify(e)); }
}); 
</pre><a href="route"></a>
    <hr>
    <h2 id="gps-csv-route-file">
      GPS CSV Route File
    </h2>
    <p>
      The Route file is a text-based CSV (Comma Separated Values) file that contains information about waypoints on a route, including satellite information. This file is used only for GPS simulations on the Emulator.
    </p>
    <ul>
      <li>Each row corresponds to a GPS fix received by the radio from a group of satellites.
      </li>
      <li>Each column represents an attribute of a GPS fix.
      </li>
    </ul>
    <p>
      The column order is significant; swapping header or data columns is not permitted. Each row consists of 20 fields related to the GPS fix itself, followed by 30 fields representing data about up to 10 satellites used for the fix.
    </p>
    <p>
      To get the best simulation results (accurate pinpointing of the location), put the values mentioned as Default values in the fields. These are the ideal values.
    </p>
    <p>
      For each satellite, three fields are used to represent the following information:
    </p>
    <ul>
      <li>The SV (space vehicle) number
      </li>
      <li>The signal-to-noise ratio and azimuth, concatenated into a string of five digits
      </li>
      <li>The elevation
      </li>
    </ul>
    <p>
      If fewer than 10 satellites are available, some of the fields are empty. All fields must be present even if empty. Fields with values should be shifted to the left. For example, if 4 satellites are available, the satellite data consists of 12 fields with data, followed by 18 empty fields.
    </p>
    <p>
      The following fields are currently used for simulation only, and are not activated on the device:
    </p>
    <ul>
      <li>utctime
      </li>
      <li>utcdate
      </li>
      <li>timetofix
      </li>
      <li>verticaldilusionofprecision
      </li>
      <li>horizontaldilusionofprecision
      </li>
      <li>fixtype (2d/3d)
      </li>
      <li>position mode
      </li>
      <li>satellites in use
      </li>
      <li>satellites in view mask
      </li>
      <li>satellite details for the first 10 satellites
      </li>
    </ul>
    <table border="1">
      <thead>
        <tr>
          <th>
            Column
          </th>
          <th>
            Meaning
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            error
          </td>
          <td>
            Status of the GPS fix
          </td>
          <td>
            A value of success if the GPS fix data is valid.
          </td>
        </tr>
        <tr>
          <td>
            time
          </td>
          <td>
            Time at which this fix was received from satellite.
          </td>
          <td>
            format: HH:MM:SS<br>
            Example: 13:32:22
          </td>
        </tr>
        <tr>
          <td>
            date
          </td>
          <td>
            Date on which this fix was received from satellite.
          </td>
          <td>
            format: DDMMYYYY<br>
            Example 2702008
          </td>
        </tr>
        <tr>
          <td>
            latitude
          </td>
          <td>
            Location's latitude in degrees
          </td>
          <td>
            Floating point; Valid range: [-90.0, 90.0]<br>
            Example: 37.39237547
          </td>
        </tr>
        <tr>
          <td>
            longitude
          </td>
          <td>
            Location's longitude in degrees
          </td>
          <td>
            Floating point; Valid range: [-180.0, 180.0]<br>
            Example: -122.04251111
          </td>
        </tr>
        <tr>
          <td>
            altitude
          </td>
          <td>
            Location's altitude in meters
          </td>
          <td>
            Floating point; if unknown, value is -10,000,000<br>
            Example: 53<br>
            Default: 0
          </td>
        </tr>
        <tr>
          <td>
            velocity
          </td>
          <td>
            Velocity of the moving target in meters per second.
          </td>
          <td>
            Floating point; if unknown then value should be -1<br>
            Example: 4.75<br>
            Default: 0
          </td>
        </tr>
        <tr>
          <td>
            heading
          </td>
          <td>
            The compass azimuth in degrees
          </td>
          <td>
            Floating point; valid range [0.0, 360.0];<br>
            If unknown, value is -1<br>
            Example: 124 or 0 or -1<br>
            Default: 0
          </td>
        </tr>
        <tr>
          <td>
            timetofix
          </td>
          <td>
            Time in seconds to get a fix
          </td>
          <td>
            Default: 1
          </td>
        </tr>
        <tr>
          <td>
            timextradown
          </td>
          <td>
            Time in seconds for XTRA to download when using XTRA
          </td>
          <td>
            Default: 0
          </td>
        </tr>
        <tr>
          <td>
            timextrainject
          </td>
          <td>
            Time in seconds for XTRA injection when using XTRA
          </td>
          <td>
            Default: 0
          </td>
        </tr>
        <tr>
          <td>
            haccuracy
          </td>
          <td>
            Location's horizontal accuracy in meters
          </td>
          <td>
            Floating point; if unknown, value is -1<br>
            Example: 7.07<br>
            Default: 5
          </td>
        </tr>
        <tr>
          <td>
            vaccuracy
          </td>
          <td>
            Location's vertical accuracy in meters
          </td>
          <td>
            Floating point; if unknown, value is -1<br>
            Example: 12<br>
            Default: 5
          </td>
        </tr>
        <tr>
          <td>
            hdilusion
          </td>
          <td>
            Horizontal dilution of precision of the location
          </td>
          <td>
            Not supported for simulation.<br>
            Default: 1
          </td>
        </tr>
        <tr>
          <td>
            vdilusion
          </td>
          <td>
            Vertical dilution of precision of the location
          </td>
          <td>
            Not supported for simulation.<br>
            Default: 1
          </td>
        </tr>
        <tr>
          <td>
            fixtype
          </td>
          <td>
            Indicates whether a fix is 2D (lat / long) or 3D (lat / long / alt)
          </td>
          <td>
            Possible values: &quot;2d&quot;, &quot;3d&quot;<br>
            Default: &quot;3d&quot;
          </td>
        </tr>
        <tr>
          <td>
            attemptedmode
          </td>
          <td>
            GPS Mode requested
          </td>
          <td>
            Default: &quot;msbased&quot;
          </td>
        </tr>
        <tr>
          <td>
            positionmode
          </td>
          <td>
            GPS Mode used
          </td>
          <td>
            Default: &quot;msbased&quot;
          </td>
        </tr>
        <tr>
          <td>
            satsinview
          </td>
          <td>
            Number of satellites in view (from 0 to 12)
          </td>
          <td>
            Integer<br>
            Example: 10<br>
            Default: 5
          </td>
        </tr>
        <tr>
          <td>
            satsinuse
          </td>
          <td>
            Bitmask indicating the number of valid satellites out of a max possible of 32
          </td>
          <td>
            Written as a sequence of ones-and-zeroes, terminated by &quot;b&quot;. &quot;1&quot; indicates that this satellite is available for the fix,<br>
            &quot;0&quot; indicates that it is not. Reads from right to left (starting from satellite number 0) Default: 0b<br>
            This can also tell the number of satellite in view.<br>
            Example: 000000010010001001010000000000b<br>
            This shows that there were 5 satellites used for the fix<br>
            satellite numbers 10, 12, 15, 19 and 22 were used.
          </td>
        </tr>
        <tr>
          <td>
            s1prn
          </td>
          <td>
            The SV (space vehicle) number of the first satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s1cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the first satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s1elev
          </td>
          <td>
            The elevation of the first satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s2prn
          </td>
          <td>
            The SV (space vehicle) number of the second satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s2cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the second satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s2elev
          </td>
          <td>
            The elevation of the second satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s3prn
          </td>
          <td>
            The SV (space vehicle) number of the third satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s3cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the third satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s3elev
          </td>
          <td>
            The elevation of the third satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s4prn
          </td>
          <td>
            The SV (space vehicle) number of the fourth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s4cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the fourth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s4elev
          </td>
          <td>
            The elevation of the fourth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s5prn
          </td>
          <td>
            The SV (space vehicle) number of the fifth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s5cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the fifth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s5elev
          </td>
          <td>
            The elevation of the fifth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s6prn
          </td>
          <td>
            The SV (space vehicle) number of the sixth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s6cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the sixth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s6elev
          </td>
          <td>
            The elevation of the sixth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s7prn
          </td>
          <td>
            The SV (space vehicle) number of the seventh satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s7cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the seventh satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s7elev
          </td>
          <td>
            The elevation of the seventh satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s8prn
          </td>
          <td>
            The SV (space vehicle) number of the eighth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s8cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the eighth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s8elev
          </td>
          <td>
            The elevation of the eighth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s9prn
          </td>
          <td>
            The SV (space vehicle) number of the ninth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s9cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the ninth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s9elev
          </td>
          <td>
            The elevation of the ninth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
        <tr>
          <td>
            s10prn
          </td>
          <td>
            The SV (space vehicle) number of the tenth satellite in view
          </td>
          <td>
            Integer; Example: 23
          </td>
        </tr>
        <tr>
          <td>
            s10cno&amp;azi
          </td>
          <td>
            The signal-to-noise ratio and azimuth of the tenth satellite in view
          </td>
          <td>
            Integer; Format: AAASS where AAA = azimuth in degrees 000 to 359 and SS = snr in dB 00 to 99, null when not tracking.<br>
            Example: 27931
          </td>
        </tr>
        <tr>
          <td>
            s10elev
          </td>
          <td>
            The elevation of the tenth satellite in view
          </td>
          <td>
            Integer: Example: 31
          </td>
        </tr>
      </tbody>
    </table>
		</div>
	</body>
</html>